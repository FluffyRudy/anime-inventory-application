<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Anime Series</title>
   <link rel="stylesheet" href="css/addAnime.css">
   <link rel="stylesheet" href="css/header.css">
</head>
<body>
    <%- include("./partials/header.ejs")  %> 
    <div class="container">
        <h2>Create Anime Series</h2>
        <%- include('./partials/errors.ejs') %>
        <form action="/create" method="post" enctype="multipart/form-data">
            <label for="name">Name:</label>
            <input
                type="text"
                id="name"
                name="name"
                value="<%= values.name || '' %>"
                required
            />

            <label>Genres:</label>
            <div class="genres">
                <button type="button" class="genre-list-toggle" data-toggle="0">
                    Show Genre
                </button>
                <div class="genre-checkbox-parent">
                    <ul class="genre-checkbox-list">
                        <!-- dynamically rendered -->
                    </ul>
                </div>
            </div>

            <label for="release_date">Release Date:</label>
            <input
                required
                type="date"
                id="release_date"
                name="release_date"
                value="<%= values.release_date || '' %>"
            />

            <label for="completed_date">Completed Date:</label>
            <input
                type="date"
                id="completed_date"
                name="completed_date"
                value="<%= values.completed_date || '' %>"
            />

            <label for="creator">Creator:</label>
            <input
                type="text"
                id="creator"
                name="creator"
                value="<%= values.creator || '' %>"
            />

            <label for="rating">Rating (0.00 to 10.00):</label>
            <input
                type="number"
                id="rating"
                name="rating"
                min="0"
                max="10"
                step="0.1"
                value="<%= values.rating || '0.00' %>"
            />
            
            <label for="image">Upload an image:</label>
            <input type="file" name="image" id="image" accept="image/*" />

            <button type="submit">Create Anime Series</button>
        </form>
    </div>
    <script>
        const genreListToggleBtn = document.querySelector(".genre-list-toggle");
        const genreCheckboxSubParent = document.querySelector(
            ".genre-checkbox-parent"
        );
        if (genreListToggleBtn && genreCheckboxSubParent) {
            genreListToggleBtn.addEventListener("click", () => {
                const toggleValue = genreListToggleBtn.dataset.toggle;
                if (toggleValue === "1") {
                    genreListToggleBtn.dataset.toggle = "0";
                    genreCheckboxSubParent.style.display = "none";
                } else {
                    genreListToggleBtn.dataset.toggle = "1";
                    genreCheckboxSubParent.style.display = "block";
                }
            });
        }
    </script>
</body>
<script src="/js/listAnime.js"></script>
<script src="/js/getGenre.js"></script>
</html>

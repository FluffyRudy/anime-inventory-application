<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Anime Series</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: min(1000px, 97vw);
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            -webkit-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #333;
        }

        input {
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        input:not([type='checkbox']) {
          padding: 10px;
          margin-bottom: 15px;
        }

        button {
            padding: 10px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #218838;
        }

        .genres {
            margin: 15px 0;
        }

        .genre-checkbox-list {
            list-style-type: none;
            padding: 0;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -ms-flex-wrap: wrap;
                flex-wrap: wrap;
            gap: 10px; 
        }

        .genre-checkbox-list li {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
                -ms-flex-align: center;
                    align-items: center;
            margin: 0;
            border: 1px solid #ccc; 
            border-radius: 4px; 
            padding: 5px 10px; 
            -webkit-transition: border-color 0.3s; 
            -o-transition: border-color 0.3s; 
            transition: border-color 0.3s;
            height: 40px;
        }

        .genre-checkbox-list li:hover {
            border-color: #007bff; 
        }

        .genre-checkbox {
            width: 20px;
            margin: 8px; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Create Anime Series</h2>
        <%- include('./partials/errors.ejs') %>
        <form action="/create" method="post">
            <label for="name">Name:</label>
            <input
                type="text"
                id="name"
                name="name"
                value="<%= values.name || '' %>"
                required
            />

            <label>Genres:</label>
            <div class="genres">
                <button type="button" class="genre-list-toggle" data-toggle="0">
                    Show Genre
                </button>
                <div class="genre-checkbox-parent">
                    <ul class="genre-checkbox-list">
                        <% locals.genres.forEach(genre => { %>
                            <% const isChecked = locals.values.genre && locals.values.genre.includes(genre) %> 
                            <li>
                                <input
                                    class="genre-checkbox"
                                    type="checkbox"
                                    name="genre"
                                    value="<%= genre %>"
                                    id="<%= genre %>"
                                    <% if (isChecked) { %> checked <% } %>
                                />
                                <label class="genre-checkbox-label" for="<%= genre %>"><%= genre %></label>
                            </li>
                        <% }) %>
                    </ul>
                </div>
            </div>

            <label for="release_date">Release Date:</label>
            <input
                required
                type="date"
                id="release_date"
                name="release_date"
                value="<%= values.release_date || '' %>"
            />

            <label for="completed_date">Completed Date:</label>
            <input
                type="date"
                id="completed_date"
                name="completed_date"
                value="<%= values.completed_date || '' %>"
            />

            <label for="creator">Creator:</label>
            <input
                type="text"
                id="creator"
                name="creator"
                value="<%= values.creator || '' %>"
            />

            <label for="rating">Rating (0.00 to 10.00):</label>
            <input
                type="number"
                id="rating"
                name="rating"
                min="0"
                max="10"
                step="0.1"
                value="<%= values.rating || '0.00' %>"
            />

            <button type="submit">Create Anime Series</button>
        </form>
    </div>
    <script>
        const genreListToggleBtn = document.querySelector(".genre-list-toggle");
        const genreCheckboxSubParent = document.querySelector(
            ".genre-checkbox-parent"
        );
        if (genreListToggleBtn && genreCheckboxSubParent) {
            genreListToggleBtn.addEventListener("click", () => {
                const toggleValue = genreListToggleBtn.dataset.toggle;
                if (toggleValue === "1") {
                    genreListToggleBtn.dataset.toggle = "0";
                    genreCheckboxSubParent.style.display = "none";
                } else {
                    genreListToggleBtn.dataset.toggle = "1";
                    genreCheckboxSubParent.style.display = "block";
                }
            });
        }
    </script>
</body>
</html>
